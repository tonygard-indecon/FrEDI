<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="`This function creates plots for the summarized FrEDI outputs. get_plots() returns a list with heatmaps for model types present in the data (GCMs and SLR scenarios) and ribbon plots, by sector."><title>Create plots of FrEDI outputs — get_plots • FrEDI</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create plots of FrEDI outputs — get_plots"><meta property="og:description" content="`This function creates plots for the summarized FrEDI outputs. get_plots() returns a list with heatmaps for model types present in the data (GCMs and SLR scenarios) and ribbon plots, by sector."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">FrEDI</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">3.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-getting-started">Getting Started</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-getting-started">
    <a class="dropdown-item" href="../articles/About.html">About FrEDI</a>
    <a class="dropdown-item" href="../articles/manual.html">Installing &amp; Running FrEDI</a>
    <a class="dropdown-item" href="../articles/contributing.html">Contributing to FrEDI</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/References.html">Documentation</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-examples">Examples</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-examples">
    <a class="dropdown-item" href="../articles/Example1.html">Example #1: Run FrEDI with default parameters</a>
    <a class="dropdown-item" href="../articles/Example2.html">Example #2: Run FrEDI_SV with default parameters</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/USEPA/FrEDI">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create plots of FrEDI outputs</h1>
      <small class="dont-index">Source: <a href="https://github.com/USEPA/FrEDI/blob/HEAD/R/get_plots.R" class="external-link"><code>R/get_plots.R</code></a></small>
      <div class="d-none name"><code>get_plots.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>`This function creates plots for the summarized FrEDI outputs. <code>get_plots()</code> returns a list with heatmaps for model types present in the data (GCMs and SLR scenarios) and ribbon plots, by sector.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_plots</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  column <span class="op">=</span> <span class="st">"annual_impacts"</span>,</span>
<span>  undiscounted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  plotTypes <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  save <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  directory <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  groupVars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sector"</span>, <span class="st">"variant"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>Data frame of summarized outputs produced by <code><a href="run_fredi.html">run_fredi()</a></code>. Do not change column names of the <code><a href="run_fredi.html">run_fredi()</a></code> output before running <code>get_plots()</code>.</p></dd>


<dt>column</dt>
<dd><p>A character string indicating the name of the column in the data for which to create plots.</p></dd>


<dt>undiscounted</dt>
<dd><p>A <code>TRUE/FALSE</code> value indicating whether the values in column represent undiscounted values or discounted values (i.e., present values). Defaults to <code>undiscounted=TRUE</code>.</p></dd>


<dt>plotTypes</dt>
<dd><p>Character string or character vector indicating which types of plots to produce. Options are <code>c("heatmaps", "ribbon", "all")</code>. Set <code>plotTypes="all"</code> (default) to produce both types of plots.</p></dd>


<dt>save</dt>
<dd><p>A <code>TRUE/FALSE</code> value indicating whether to save results. If a directory value is supplied (i.e., <code>!is.null(directory)</code>), defaults to <code>save=TRUE</code>. Otherwise, default is <code>save=FALSE</code>.</p></dd>


<dt>directory</dt>
<dd><p>A character string indicating the location of a directory in which to save the plot objects. No default (i.e., <code>directory=NULL</code>).</p></dd>


<dt>groupVars</dt>
<dd><p>A character vector indicating columns to use for grouping. Defaults to <code>groupVars=c("sector", "variant")</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>get_plots()</code> returns a nested list of plots:</p>


<table class="table table"><tr><td><strong>List Index</strong></td><td><strong>Description</strong></td></tr><tr><td><code>heatmaps</code></td><td>List of heatmaps with list elements for all unique values for model types present in data (i.e., <code>"GCM"</code> for results calculated with temperature as the driver value and <code>"SLR"</code> for results calculated with GMSL as the driver value.</td></tr><tr><td><code>ribbon</code></td><td>List of lists of annual results. List of annual plots contains a list of sectors. Each sector contains a list of nested regional plots (<code>regional</code>, with all regions except national results and <code>national</code>, for national results).</td></tr></table></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function creates plots for the summarized FrEDI outputs. <code>get_plots()</code> returns a list with heatmaps for model types present in the data (GCMs and SLR scenarios) and annual results for all sectors and variants. Results from FrEDI must be summed across impact types before using <code>get_plots()</code> (use <code><a href="run_fredi.html">run_fredi()</a></code> with the defaults or run <code>aggregate_impacts(aggLevels="impactType")</code> on the output from <code><a href="run_fredi.html">run_fredi()</a></code>).</p>
<p>By default, <code>get_plots()</code> plots results from the <code>"annual_impacts"</code> column (or users can specify a column name in the data with <code>column</code>).</p>
<p>The argument <code>undiscounted</code> is used by <code>get_plots()</code> for plot labels and in file and directory names for saving results.</p>
<p><code>get_plots()</code> produces heatmaps (<code>plotTypes="heatmaps"</code>) for the outputs of FrEDI and/or plots the average value and range of impacts as a time series (<code>plotTypes="ribbon"</code>) for each sector-variant-region combination. Users can specify which plot types to produce by setting <code>plotTypes</code>. Set <code>plotTypes="all"</code> (default) to produce both heat maps and annual results or specify a single type (<code>plotTypes="heatmaps"</code> and <code>plotTypes="ribbon"</code>, respectively).</p>
<p>The heatmaps display the numeric values in the specified column (e.g., <code>"annual_impacts"</code>) as a grid of colored pixels. Each row in the grid corresponds to a sector-variant combination (e.g., "Coastal Properties, No Adaptation"), while columns in the grid correspond to years. In other words, the heatmaps display the relative intensity of the impacts of a sector and variant compared to others. The colors in the heatmap are a gradient ranging from dark blue (impacts with values below zero) to dark red (impacts with values above zero), with a midpoint at zero (missing values appear as grey pixels). The scale of the gradient is determined from the underlying data, with the darkest points corresponding to the minimum and maximum values.</p>
<p>If temperature-driven (GCM sectors) and SLR-driven (SLR sectors) sectors are both present in the data, <code>get_plots()</code> will produce a separate heatmap for each. Each heatmap displays panels for each region (stacked vertically) and underlying models (organized horizontally).</p>
<p>Setting (<code>plotTypes="ribbon"</code>) plots the annual impacts as time series. For temperature-driven sectors, the model average is plotted as a line and the range of model values (minimum and maximum) are plotted as a ribbon plot. For the SLR-driven sectors, the interpolated impacts are plotted as a line. For sectors with multiple variants, impacts for individual variants are displayed in separate panels (organized horizontally).</p>
<p>If <code>save=TRUE</code> and the user supplies a path to a directory (i.e., <code>!is.null(directory)</code>), <code>get_plots()</code> will try to save results to the specified directory. Separate directories are created within the specified directory for heatmaps and ribbon plots.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Environmental Protection Agency (EPA). 2021. Technical Documentation on The Framework for Evaluating Damages and Impacts (FrEDI). Technical Report EPA 430-R-21-004, EPA, Washington, DC. Available at <a href="https://epa.gov/cira/FrEDI/" class="external-link">https://epa.gov/cira/FrEDI/</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">### Create temperature binning scenario</span></span></span>
<span class="r-in"><span><span class="va">df_tempExOut</span> <span class="op">&lt;-</span> <span class="fu">get_fredi</span><span class="op">(</span>aggLevels<span class="op">=</span><span class="st">"none"</span>, pv<span class="op">=</span><span class="cn">TRUE</span>, silent<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in get_fredi(aggLevels = "none", pv = TRUE, silent = TRUE):</span> could not find function "get_fredi"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Aggregate temperature binning summary across multiple columns</span></span></span>
<span class="r-in"><span><span class="va">agg_tempExOut</span> <span class="op">&lt;-</span> <span class="va">df_tempExOut</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="aggregate_impacts.html">aggregate_impacts</a></span><span class="op">(</span>columns<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"annual_impacts"</span>, <span class="st">"discounted_impacts"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in ungroup(.):</span> object 'df_tempExOut' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Create list of plots for aggregated results</span></span></span>
<span class="r-in"><span><span class="va">agg_plotList</span> <span class="op">&lt;-</span> <span class="va">agg_tempExOut</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">get_plots</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in (function (y) {    y$valueColumn &lt;- y[, column]    return(y)})(.):</span> object 'agg_tempExOut' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Create list of heatmaps for regional values only:</span></span></span>
<span class="r-in"><span><span class="va">reg_plotList</span> <span class="op">&lt;-</span> <span class="va">agg_tempExOut</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">region</span><span class="op">!=</span><span class="st">"National Total"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">get_plots</span><span class="op">(</span>plotTypes<span class="op">=</span><span class="st">"heatmaps"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in filter(., region != "National Total"):</span> object 'agg_tempExOut' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Create list of annual plots for national values only:</span></span></span>
<span class="r-in"><span><span class="va">nation_plotList</span> <span class="op">&lt;-</span> <span class="va">agg_tempExOut</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">region</span><span class="op">==</span><span class="st">"National Total"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">get_plots</span><span class="op">(</span>plotTypes<span class="op">=</span><span class="st">"annual"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in filter(., region == "National Total"):</span> object 'agg_tempExOut' not found</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Corinne Hartin, Erin McDuffie, Karen Noiva.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7. | July 2023</p>
</div>

    </footer></div>

  

  

  </body></html>

